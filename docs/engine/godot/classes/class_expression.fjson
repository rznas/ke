{"parents": [{"link": "../", "title": "All classes"}], "prev": {"link": "../class_engineprofiler/", "title": "EngineProfiler"}, "next": {"link": "../class_fileaccess/", "title": "FileAccess"}, "title": "Expression", "meta": {"github_url": "hide"}, "body": "<section id=\"expression\">\n<span id=\"class-expression\"></span><h1>Expression<a class=\"headerlink\" href=\"#expression\" title=\"Link to this heading\">\uf0c1</a></h1>\n<p><strong>Inherits:</strong> <a class=\"reference internal\" href=\"../class_refcounted/#class-refcounted\"><span class=\"std std-ref\">RefCounted</span></a> <strong>&lt;</strong> <a class=\"reference internal\" href=\"../class_object/#class-object\"><span class=\"std std-ref\">Object</span></a></p>\n<p>A class that stores an expression you can execute.</p>\n<section class=\"classref-introduction-group\" id=\"description\">\n<h2>Description<a class=\"headerlink\" href=\"#description\" title=\"Link to this heading\">\uf0c1</a></h2>\n<p>An expression can be made of any arithmetic operation, built-in math function call, method call of a passed instance, or built-in type construction call.</p>\n<p>An example expression text using the built-in math functions could be <code class=\"docutils literal notranslate\"><span class=\"pre\">sqrt(pow(3,</span> <span class=\"pre\">2)</span> <span class=\"pre\">+</span> <span class=\"pre\">pow(4,</span> <span class=\"pre\">2))</span></code>.</p>\n<p>In the following example we use a <a class=\"reference internal\" href=\"../class_lineedit/#class-lineedit\"><span class=\"std std-ref\">LineEdit</span></a> node to write our expression and show the result.</p>\n<div class=\"sphinx-tabs docutils container\">\n<div class=\"docutils container\">\n<div class=\"docutils container\">\n<div class=\"docutils container\">\n<p>GDScript</p>\n</div>\n</div>\n<div class=\"docutils container\">\n</div>\n<div class=\"highlight-gdscript notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"k\">var</span><span class=\"w\"> </span><span class=\"n\">expression</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"nb\">Expression</span><span class=\"o\">.</span><span class=\"nf\">new</span><span class=\"p\">()</span>\n\n<span class=\"k\">func</span><span class=\"w\"> </span><span class=\"nf nf-Declaration\">_ready</span><span class=\"p\">():</span>\n<span class=\"w\">    </span><span class=\"sx\">$LineEdit</span><span class=\"o\">.</span><span class=\"vi\">text_submitted</span><span class=\"o\">.</span><span class=\"nf\">connect</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"vi\">_on_text_submitted</span><span class=\"p\">)</span>\n\n<span class=\"k\">func</span><span class=\"w\"> </span><span class=\"nf nf-Declaration\">_on_text_submitted</span><span class=\"p\">(</span><span class=\"n\">command</span><span class=\"p\">):</span>\n<span class=\"w\">    </span><span class=\"k\">var</span><span class=\"w\"> </span><span class=\"n\">error</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"n\">expression</span><span class=\"o\">.</span><span class=\"nf\">parse</span><span class=\"p\">(</span><span class=\"n\">command</span><span class=\"p\">)</span>\n<span class=\"w\">    </span><span class=\"k k-ControlFlow\">if</span><span class=\"w\"> </span><span class=\"n\">error</span><span class=\"w\"> </span><span class=\"o\">!=</span><span class=\"w\"> </span><span class=\"n\">OK</span><span class=\"p\">:</span>\n<span class=\"w\">        </span><span class=\"nb nb-Function\">print</span><span class=\"p\">(</span><span class=\"n\">expression</span><span class=\"o\">.</span><span class=\"nf\">get_error_text</span><span class=\"p\">())</span>\n<span class=\"w\">        </span><span class=\"k k-ControlFlow\">return</span>\n<span class=\"w\">    </span><span class=\"k\">var</span><span class=\"w\"> </span><span class=\"n\">result</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"n\">expression</span><span class=\"o\">.</span><span class=\"nf\">execute</span><span class=\"p\">()</span>\n<span class=\"w\">    </span><span class=\"k k-ControlFlow\">if</span><span class=\"w\"> </span><span class=\"ow\">not</span><span class=\"w\"> </span><span class=\"n\">expression</span><span class=\"o\">.</span><span class=\"nf\">has_execute_failed</span><span class=\"p\">():</span>\n<span class=\"w\">        </span><span class=\"sx\">$LineEdit</span><span class=\"o\">.</span><span class=\"vi\">text</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"nb nb-Function\">str</span><span class=\"p\">(</span><span class=\"n\">result</span><span class=\"p\">)</span>\n</pre></div>\n</div>\n</div>\n<div class=\"docutils container\">\n<div class=\"docutils container\">\n<div class=\"docutils container\">\n<p>C#</p>\n</div>\n</div>\n<div class=\"docutils container\">\n</div>\n<div class=\"highlight-csharp notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"k\">private</span><span class=\"w\"> </span><span class=\"n\">Expression</span><span class=\"w\"> </span><span class=\"n\">_expression</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"k\">new</span><span class=\"w\"> </span><span class=\"n\">Expression</span><span class=\"p\">();</span>\n\n<span class=\"k\">public</span><span class=\"w\"> </span><span class=\"k\">override</span><span class=\"w\"> </span><span class=\"k\">void</span><span class=\"w\"> </span><span class=\"nf\">_Ready</span><span class=\"p\">()</span>\n<span class=\"p\">{</span>\n<span class=\"w\">    </span><span class=\"n\">GetNode</span><span class=\"o\">&lt;</span><span class=\"n\">LineEdit</span><span class=\"o\">&gt;</span><span class=\"p\">(</span><span class=\"s\">&quot;LineEdit&quot;</span><span class=\"p\">).</span><span class=\"n\">TextSubmitted</span><span class=\"w\"> </span><span class=\"o\">+=</span><span class=\"w\"> </span><span class=\"n\">OnTextEntered</span><span class=\"p\">;</span>\n<span class=\"p\">}</span>\n\n<span class=\"k\">private</span><span class=\"w\"> </span><span class=\"k\">void</span><span class=\"w\"> </span><span class=\"nf\">OnTextEntered</span><span class=\"p\">(</span><span class=\"kt\">string</span><span class=\"w\"> </span><span class=\"n\">command</span><span class=\"p\">)</span>\n<span class=\"p\">{</span>\n<span class=\"w\">    </span><span class=\"n\">Error</span><span class=\"w\"> </span><span class=\"n\">error</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"n\">_expression</span><span class=\"p\">.</span><span class=\"n\">Parse</span><span class=\"p\">(</span><span class=\"n\">command</span><span class=\"p\">);</span>\n<span class=\"w\">    </span><span class=\"k\">if</span><span class=\"w\"> </span><span class=\"p\">(</span><span class=\"n\">error</span><span class=\"w\"> </span><span class=\"o\">!=</span><span class=\"w\"> </span><span class=\"n\">Error</span><span class=\"p\">.</span><span class=\"n\">Ok</span><span class=\"p\">)</span>\n<span class=\"w\">    </span><span class=\"p\">{</span>\n<span class=\"w\">        </span><span class=\"n\">GD</span><span class=\"p\">.</span><span class=\"n\">Print</span><span class=\"p\">(</span><span class=\"n\">_expression</span><span class=\"p\">.</span><span class=\"n\">GetErrorText</span><span class=\"p\">());</span>\n<span class=\"w\">        </span><span class=\"k\">return</span><span class=\"p\">;</span>\n<span class=\"w\">    </span><span class=\"p\">}</span>\n<span class=\"w\">    </span><span class=\"n\">Variant</span><span class=\"w\"> </span><span class=\"n\">result</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"n\">_expression</span><span class=\"p\">.</span><span class=\"n\">Execute</span><span class=\"p\">();</span>\n<span class=\"w\">    </span><span class=\"k\">if</span><span class=\"w\"> </span><span class=\"p\">(</span><span class=\"o\">!</span><span class=\"n\">_expression</span><span class=\"p\">.</span><span class=\"n\">HasExecuteFailed</span><span class=\"p\">())</span>\n<span class=\"w\">    </span><span class=\"p\">{</span>\n<span class=\"w\">        </span><span class=\"n\">GetNode</span><span class=\"o\">&lt;</span><span class=\"n\">LineEdit</span><span class=\"o\">&gt;</span><span class=\"p\">(</span><span class=\"s\">&quot;LineEdit&quot;</span><span class=\"p\">).</span><span class=\"n\">Text</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"n\">result</span><span class=\"p\">.</span><span class=\"n\">ToString</span><span class=\"p\">();</span>\n<span class=\"w\">    </span><span class=\"p\">}</span>\n<span class=\"p\">}</span>\n</pre></div>\n</div>\n</div>\n</div>\n</section>\n<section class=\"classref-introduction-group\" id=\"tutorials\">\n<h2>Tutorials<a class=\"headerlink\" href=\"#tutorials\" title=\"Link to this heading\">\uf0c1</a></h2>\n<ul class=\"simple\">\n<li><p><a class=\"reference internal\" href=\"../../tutorials/scripting/evaluating_expressions/\"><span class=\"doc\">Evaluating Expressions</span></a></p></li>\n</ul>\n</section>\n<section class=\"classref-reftable-group\" id=\"methods\">\n<h2>Methods<a class=\"headerlink\" href=\"#methods\" title=\"Link to this heading\">\uf0c1</a></h2>\n<table class=\"docutils align-default\">\n<tbody>\n<tr class=\"row-odd\"><td><p><a class=\"reference internal\" href=\"../class_variant/#class-variant\"><span class=\"std std-ref\">Variant</span></a></p></td>\n<td><p><a class=\"reference internal\" href=\"#class-expression-method-execute\"><span class=\"std std-ref\">execute</span></a>(inputs: <a class=\"reference internal\" href=\"../class_array/#class-array\"><span class=\"std std-ref\">Array</span></a> = [], base_instance: <a class=\"reference internal\" href=\"../class_object/#class-object\"><span class=\"std std-ref\">Object</span></a> = null, show_error: <a class=\"reference internal\" href=\"../class_bool/#class-bool\"><span class=\"std std-ref\">bool</span></a> = true, const_calls_only: <a class=\"reference internal\" href=\"../class_bool/#class-bool\"><span class=\"std std-ref\">bool</span></a> = false)</p></td>\n</tr>\n<tr class=\"row-even\"><td><p><a class=\"reference internal\" href=\"../class_string/#class-string\"><span class=\"std std-ref\">String</span></a></p></td>\n<td><p><a class=\"reference internal\" href=\"#class-expression-method-get-error-text\"><span class=\"std std-ref\">get_error_text</span></a>() <abbr title=\"This method has no side effects. It doesn't modify any of the instance's member variables.\">const</abbr></p></td>\n</tr>\n<tr class=\"row-odd\"><td><p><a class=\"reference internal\" href=\"../class_bool/#class-bool\"><span class=\"std std-ref\">bool</span></a></p></td>\n<td><p><a class=\"reference internal\" href=\"#class-expression-method-has-execute-failed\"><span class=\"std std-ref\">has_execute_failed</span></a>() <abbr title=\"This method has no side effects. It doesn't modify any of the instance's member variables.\">const</abbr></p></td>\n</tr>\n<tr class=\"row-even\"><td><p><a class=\"reference internal\" href=\"../class_&#64;globalscope/#enum-globalscope-error\"><span class=\"std std-ref\">Error</span></a></p></td>\n<td><p><a class=\"reference internal\" href=\"#class-expression-method-parse\"><span class=\"std std-ref\">parse</span></a>(expression: <a class=\"reference internal\" href=\"../class_string/#class-string\"><span class=\"std std-ref\">String</span></a>, input_names: <a class=\"reference internal\" href=\"../class_packedstringarray/#class-packedstringarray\"><span class=\"std std-ref\">PackedStringArray</span></a> = PackedStringArray())</p></td>\n</tr>\n</tbody>\n</table>\n</section>\n<hr class=\"classref-section-separator docutils\" />\n<section class=\"classref-descriptions-group\" id=\"method-descriptions\">\n<h2>Method Descriptions<a class=\"headerlink\" href=\"#method-descriptions\" title=\"Link to this heading\">\uf0c1</a></h2>\n<p class=\"classref-method\" id=\"class-expression-method-execute\"><a class=\"reference internal\" href=\"../class_variant/#class-variant\"><span class=\"std std-ref\">Variant</span></a> <strong>execute</strong>(inputs: <a class=\"reference internal\" href=\"../class_array/#class-array\"><span class=\"std std-ref\">Array</span></a> = [], base_instance: <a class=\"reference internal\" href=\"../class_object/#class-object\"><span class=\"std std-ref\">Object</span></a> = null, show_error: <a class=\"reference internal\" href=\"../class_bool/#class-bool\"><span class=\"std std-ref\">bool</span></a> = true, const_calls_only: <a class=\"reference internal\" href=\"../class_bool/#class-bool\"><span class=\"std std-ref\">bool</span></a> = false) <a class=\"reference internal\" href=\"#class-expression-method-execute\"><span class=\"std std-ref\">\ud83d\udd17</span></a></p>\n<p>Executes the expression that was previously parsed by <a class=\"reference internal\" href=\"#class-expression-method-parse\"><span class=\"std std-ref\">parse()</span></a> and returns the result. Before you use the returned object, you should check if the method failed by calling <a class=\"reference internal\" href=\"#class-expression-method-has-execute-failed\"><span class=\"std std-ref\">has_execute_failed()</span></a>.</p>\n<p>If you defined input variables in <a class=\"reference internal\" href=\"#class-expression-method-parse\"><span class=\"std std-ref\">parse()</span></a>, you can specify their values in the inputs array, in the same order.</p>\n<hr class=\"classref-item-separator docutils\" />\n<p class=\"classref-method\" id=\"class-expression-method-get-error-text\"><a class=\"reference internal\" href=\"../class_string/#class-string\"><span class=\"std std-ref\">String</span></a> <strong>get_error_text</strong>() <abbr title=\"This method has no side effects. It doesn't modify any of the instance's member variables.\">const</abbr> <a class=\"reference internal\" href=\"#class-expression-method-get-error-text\"><span class=\"std std-ref\">\ud83d\udd17</span></a></p>\n<p>Returns the error text if <a class=\"reference internal\" href=\"#class-expression-method-parse\"><span class=\"std std-ref\">parse()</span></a> or <a class=\"reference internal\" href=\"#class-expression-method-execute\"><span class=\"std std-ref\">execute()</span></a> has failed.</p>\n<hr class=\"classref-item-separator docutils\" />\n<p class=\"classref-method\" id=\"class-expression-method-has-execute-failed\"><a class=\"reference internal\" href=\"../class_bool/#class-bool\"><span class=\"std std-ref\">bool</span></a> <strong>has_execute_failed</strong>() <abbr title=\"This method has no side effects. It doesn't modify any of the instance's member variables.\">const</abbr> <a class=\"reference internal\" href=\"#class-expression-method-has-execute-failed\"><span class=\"std std-ref\">\ud83d\udd17</span></a></p>\n<p>Returns <code class=\"docutils literal notranslate\"><span class=\"pre\">true</span></code> if <a class=\"reference internal\" href=\"#class-expression-method-execute\"><span class=\"std std-ref\">execute()</span></a> has failed.</p>\n<hr class=\"classref-item-separator docutils\" />\n<p class=\"classref-method\" id=\"class-expression-method-parse\"><a class=\"reference internal\" href=\"../class_&#64;globalscope/#enum-globalscope-error\"><span class=\"std std-ref\">Error</span></a> <strong>parse</strong>(expression: <a class=\"reference internal\" href=\"../class_string/#class-string\"><span class=\"std std-ref\">String</span></a>, input_names: <a class=\"reference internal\" href=\"../class_packedstringarray/#class-packedstringarray\"><span class=\"std std-ref\">PackedStringArray</span></a> = PackedStringArray()) <a class=\"reference internal\" href=\"#class-expression-method-parse\"><span class=\"std std-ref\">\ud83d\udd17</span></a></p>\n<p>Parses the expression and returns an <a class=\"reference internal\" href=\"../class_&#64;globalscope/#enum-globalscope-error\"><span class=\"std std-ref\">Error</span></a> code.</p>\n<p>You can optionally specify names of variables that may appear in the expression with <code class=\"docutils literal notranslate\"><span class=\"pre\">input_names</span></code>, so that you can bind them when it gets executed.</p>\n</section>\n</section>\n", "metatags": "<meta name=\"viewport\" content=\"width=device-width, initial-scale=1\" />\n", "rellinks": [["genindex", "General Index", "I", "index"], ["classes/class_fileaccess", "FileAccess", "N", "next"], ["classes/class_engineprofiler", "EngineProfiler", "P", "previous"]], "sourcename": "classes/class_expression.rst.txt", "toc": "<ul>\n<li><a class=\"reference internal\" href=\"#\">Expression</a><ul>\n<li><a class=\"reference internal\" href=\"#description\">Description</a></li>\n<li><a class=\"reference internal\" href=\"#tutorials\">Tutorials</a></li>\n<li><a class=\"reference internal\" href=\"#methods\">Methods</a></li>\n<li><a class=\"reference internal\" href=\"#method-descriptions\">Method Descriptions</a></li>\n</ul>\n</li>\n</ul>\n", "display_toc": true, "page_source_suffix": ".rst", "current_page_name": "classes/class_expression", "sidebars": ["localtoc.html", "relations.html", "sourcelink.html", "searchbox.html"], "alabaster_version": "1.0.0", "alabaster_version_info": [1, 0, 0], "sphinx_version_info": [8, 1, 3, "final", 0], "READTHEDOCS": false}