{"parents": [{"link": "../", "title": "All classes"}], "prev": {"link": "../class_gradienttexture2d/", "title": "GradientTexture2D"}, "next": {"link": "../class_image/", "title": "Image"}, "title": "HeightMapShape3D", "meta": {"github_url": "hide"}, "body": "<section id=\"heightmapshape3d\">\n<span id=\"class-heightmapshape3d\"></span><h1>HeightMapShape3D<a class=\"headerlink\" href=\"#heightmapshape3d\" title=\"Link to this heading\">\uf0c1</a></h1>\n<p><strong>Inherits:</strong> <a class=\"reference internal\" href=\"../class_shape3d/#class-shape3d\"><span class=\"std std-ref\">Shape3D</span></a> <strong>&lt;</strong> <a class=\"reference internal\" href=\"../class_resource/#class-resource\"><span class=\"std std-ref\">Resource</span></a> <strong>&lt;</strong> <a class=\"reference internal\" href=\"../class_refcounted/#class-refcounted\"><span class=\"std std-ref\">RefCounted</span></a> <strong>&lt;</strong> <a class=\"reference internal\" href=\"../class_object/#class-object\"><span class=\"std std-ref\">Object</span></a></p>\n<p>A 3D heightmap shape used for physics collision.</p>\n<section class=\"classref-introduction-group\" id=\"description\">\n<h2>Description<a class=\"headerlink\" href=\"#description\" title=\"Link to this heading\">\uf0c1</a></h2>\n<p>A 3D heightmap shape, intended for use in physics to provide a shape for a <a class=\"reference internal\" href=\"../class_collisionshape3d/#class-collisionshape3d\"><span class=\"std std-ref\">CollisionShape3D</span></a>. This type is most commonly used for terrain with vertices placed in a fixed-width grid.</p>\n<p>The heightmap is represented as a 2D grid of height values, which represent the position of grid points on the Y axis. Grid points are spaced 1 unit apart on the X and Z axes, and the grid is centered on the origin of the <a class=\"reference internal\" href=\"../class_collisionshape3d/#class-collisionshape3d\"><span class=\"std std-ref\">CollisionShape3D</span></a> node. Internally, each grid square is divided into two triangles.</p>\n<p>Due to the nature of the heightmap, it cannot be used to model overhangs or caves, which would require multiple vertices at the same vertical location. Holes can be punched through the collision by assigning <a class=\"reference internal\" href=\"../class_&#64;gdscript/#class-gdscript-constant-nan\"><span class=\"std std-ref\">&#64;GDScript.NAN</span></a> to the height of the desired vertices (this is supported in both GodotPhysics3D and Jolt Physics). You could then insert meshes with their own separate collision to provide overhangs, caves, and so on.</p>\n<p><strong>Performance:</strong> <strong>HeightMapShape3D</strong> is faster to check collisions against than <a class=\"reference internal\" href=\"../class_concavepolygonshape3d/#class-concavepolygonshape3d\"><span class=\"std std-ref\">ConcavePolygonShape3D</span></a>, but it is significantly slower than primitive shapes like <a class=\"reference internal\" href=\"../class_boxshape3d/#class-boxshape3d\"><span class=\"std std-ref\">BoxShape3D</span></a>.</p>\n<p>A heightmap collision shape can also be built by using an <a class=\"reference internal\" href=\"../class_image/#class-image\"><span class=\"std std-ref\">Image</span></a> reference:</p>\n<div class=\"sphinx-tabs docutils container\">\n<div class=\"docutils container\">\n<div class=\"docutils container\">\n<div class=\"docutils container\">\n<p>GDScript</p>\n</div>\n</div>\n<div class=\"docutils container\">\n</div>\n<div class=\"highlight-gdscript notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"k\">var</span><span class=\"w\"> </span><span class=\"n\">heightmap_texture</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"nb\">ResourceLoader</span><span class=\"o\">.</span><span class=\"nf\">load</span><span class=\"p\">(</span><span class=\"s2\">&quot;res://heightmap_image.exr&quot;</span><span class=\"p\">)</span>\n<span class=\"k\">var</span><span class=\"w\"> </span><span class=\"n\">heightmap_image</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"n\">heightmap_texture</span><span class=\"o\">.</span><span class=\"nf\">get_image</span><span class=\"p\">()</span>\n<span class=\"n\">heightmap_image</span><span class=\"o\">.</span><span class=\"nf\">convert</span><span class=\"p\">(</span><span class=\"nb\">Image</span><span class=\"o\">.</span><span class=\"vi\">FORMAT_RF</span><span class=\"p\">)</span>\n\n<span class=\"k\">var</span><span class=\"w\"> </span><span class=\"n\">height_min</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"mf\">0.0</span>\n<span class=\"k\">var</span><span class=\"w\"> </span><span class=\"n\">height_max</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"mf\">10.0</span>\n\n<span class=\"nf\">update_map_data_from_image</span><span class=\"p\">(</span><span class=\"n\">heightmap_image</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">height_min</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">height_max</span><span class=\"p\">)</span>\n</pre></div>\n</div>\n</div>\n</div>\n<p><strong>Note:</strong> If you need to use a spacing different than 1 unit, you can adjust the <a class=\"reference internal\" href=\"../class_node3d/#class-node3d-property-scale\"><span class=\"std std-ref\">Node3D.scale</span></a> of the shape. However, keep in mind that GodotPhysics3D does not support non-uniform scaling: you'll need to scale the Y axis by the same amount as the X and Z axes, which means the values in <a class=\"reference internal\" href=\"#class-heightmapshape3d-property-map-data\"><span class=\"std std-ref\">map_data</span></a> will need to be pre-scaled by the inverse of that scale. Also note that GodotPhysics3D does not support scaling at all for dynamic bodies (that is, non-frozen <a class=\"reference internal\" href=\"../class_rigidbody3d/#class-rigidbody3d\"><span class=\"std std-ref\">RigidBody3D</span></a> nodes); to use a scaled <strong>HeightMapShape3D</strong> with those, you will need to use Jolt Physics.</p>\n</section>\n<section class=\"classref-reftable-group\" id=\"properties\">\n<h2>Properties<a class=\"headerlink\" href=\"#properties\" title=\"Link to this heading\">\uf0c1</a></h2>\n<table class=\"docutils align-default\">\n<tbody>\n<tr class=\"row-odd\"><td><p><a class=\"reference internal\" href=\"../class_packedfloat32array/#class-packedfloat32array\"><span class=\"std std-ref\">PackedFloat32Array</span></a></p></td>\n<td><p><a class=\"reference internal\" href=\"#class-heightmapshape3d-property-map-data\"><span class=\"std std-ref\">map_data</span></a></p></td>\n<td><p><code class=\"docutils literal notranslate\"><span class=\"pre\">PackedFloat32Array(0,</span> <span class=\"pre\">0,</span> <span class=\"pre\">0,</span> <span class=\"pre\">0)</span></code></p></td>\n</tr>\n<tr class=\"row-even\"><td><p><a class=\"reference internal\" href=\"../class_int/#class-int\"><span class=\"std std-ref\">int</span></a></p></td>\n<td><p><a class=\"reference internal\" href=\"#class-heightmapshape3d-property-map-depth\"><span class=\"std std-ref\">map_depth</span></a></p></td>\n<td><p><code class=\"docutils literal notranslate\"><span class=\"pre\">2</span></code></p></td>\n</tr>\n<tr class=\"row-odd\"><td><p><a class=\"reference internal\" href=\"../class_int/#class-int\"><span class=\"std std-ref\">int</span></a></p></td>\n<td><p><a class=\"reference internal\" href=\"#class-heightmapshape3d-property-map-width\"><span class=\"std std-ref\">map_width</span></a></p></td>\n<td><p><code class=\"docutils literal notranslate\"><span class=\"pre\">2</span></code></p></td>\n</tr>\n</tbody>\n</table>\n</section>\n<section class=\"classref-reftable-group\" id=\"methods\">\n<h2>Methods<a class=\"headerlink\" href=\"#methods\" title=\"Link to this heading\">\uf0c1</a></h2>\n<table class=\"docutils align-default\">\n<tbody>\n<tr class=\"row-odd\"><td><p><a class=\"reference internal\" href=\"../class_float/#class-float\"><span class=\"std std-ref\">float</span></a></p></td>\n<td><p><a class=\"reference internal\" href=\"#class-heightmapshape3d-method-get-max-height\"><span class=\"std std-ref\">get_max_height</span></a>() <abbr title=\"This method has no side effects. It doesn't modify any of the instance's member variables.\">const</abbr></p></td>\n</tr>\n<tr class=\"row-even\"><td><p><a class=\"reference internal\" href=\"../class_float/#class-float\"><span class=\"std std-ref\">float</span></a></p></td>\n<td><p><a class=\"reference internal\" href=\"#class-heightmapshape3d-method-get-min-height\"><span class=\"std std-ref\">get_min_height</span></a>() <abbr title=\"This method has no side effects. It doesn't modify any of the instance's member variables.\">const</abbr></p></td>\n</tr>\n<tr class=\"row-odd\"><td><p><abbr title=\"No return value.\">void</abbr></p></td>\n<td><p><a class=\"reference internal\" href=\"#class-heightmapshape3d-method-update-map-data-from-image\"><span class=\"std std-ref\">update_map_data_from_image</span></a>(image: <a class=\"reference internal\" href=\"../class_image/#class-image\"><span class=\"std std-ref\">Image</span></a>, height_min: <a class=\"reference internal\" href=\"../class_float/#class-float\"><span class=\"std std-ref\">float</span></a>, height_max: <a class=\"reference internal\" href=\"../class_float/#class-float\"><span class=\"std std-ref\">float</span></a>)</p></td>\n</tr>\n</tbody>\n</table>\n</section>\n<hr class=\"classref-section-separator docutils\" />\n<section class=\"classref-descriptions-group\" id=\"property-descriptions\">\n<h2>Property Descriptions<a class=\"headerlink\" href=\"#property-descriptions\" title=\"Link to this heading\">\uf0c1</a></h2>\n<p class=\"classref-property\" id=\"class-heightmapshape3d-property-map-data\"><a class=\"reference internal\" href=\"../class_packedfloat32array/#class-packedfloat32array\"><span class=\"std std-ref\">PackedFloat32Array</span></a> <strong>map_data</strong> = <code class=\"docutils literal notranslate\"><span class=\"pre\">PackedFloat32Array(0,</span> <span class=\"pre\">0,</span> <span class=\"pre\">0,</span> <span class=\"pre\">0)</span></code> <a class=\"reference internal\" href=\"#class-heightmapshape3d-property-map-data\"><span class=\"std std-ref\">\ud83d\udd17</span></a></p>\n<ul class=\"classref-property-setget simple\">\n<li><p><abbr title=\"No return value.\">void</abbr> <strong>set_map_data</strong>(value: <a class=\"reference internal\" href=\"../class_packedfloat32array/#class-packedfloat32array\"><span class=\"std std-ref\">PackedFloat32Array</span></a>)</p></li>\n<li><p><a class=\"reference internal\" href=\"../class_packedfloat32array/#class-packedfloat32array\"><span class=\"std std-ref\">PackedFloat32Array</span></a> <strong>get_map_data</strong>()</p></li>\n</ul>\n<p>Heightmap data. The array's size must be equal to <a class=\"reference internal\" href=\"#class-heightmapshape3d-property-map-width\"><span class=\"std std-ref\">map_width</span></a> multiplied by <a class=\"reference internal\" href=\"#class-heightmapshape3d-property-map-depth\"><span class=\"std std-ref\">map_depth</span></a>.</p>\n<p><strong>Note:</strong> The returned array is <em>copied</em> and any changes to it will not update the original property value. See <a class=\"reference internal\" href=\"../class_packedfloat32array/#class-packedfloat32array\"><span class=\"std std-ref\">PackedFloat32Array</span></a> for more details.</p>\n<hr class=\"classref-item-separator docutils\" />\n<p class=\"classref-property\" id=\"class-heightmapshape3d-property-map-depth\"><a class=\"reference internal\" href=\"../class_int/#class-int\"><span class=\"std std-ref\">int</span></a> <strong>map_depth</strong> = <code class=\"docutils literal notranslate\"><span class=\"pre\">2</span></code> <a class=\"reference internal\" href=\"#class-heightmapshape3d-property-map-depth\"><span class=\"std std-ref\">\ud83d\udd17</span></a></p>\n<ul class=\"classref-property-setget simple\">\n<li><p><abbr title=\"No return value.\">void</abbr> <strong>set_map_depth</strong>(value: <a class=\"reference internal\" href=\"../class_int/#class-int\"><span class=\"std std-ref\">int</span></a>)</p></li>\n<li><p><a class=\"reference internal\" href=\"../class_int/#class-int\"><span class=\"std std-ref\">int</span></a> <strong>get_map_depth</strong>()</p></li>\n</ul>\n<p>Number of vertices in the depth of the heightmap. Changing this will resize the <a class=\"reference internal\" href=\"#class-heightmapshape3d-property-map-data\"><span class=\"std std-ref\">map_data</span></a>.</p>\n<hr class=\"classref-item-separator docutils\" />\n<p class=\"classref-property\" id=\"class-heightmapshape3d-property-map-width\"><a class=\"reference internal\" href=\"../class_int/#class-int\"><span class=\"std std-ref\">int</span></a> <strong>map_width</strong> = <code class=\"docutils literal notranslate\"><span class=\"pre\">2</span></code> <a class=\"reference internal\" href=\"#class-heightmapshape3d-property-map-width\"><span class=\"std std-ref\">\ud83d\udd17</span></a></p>\n<ul class=\"classref-property-setget simple\">\n<li><p><abbr title=\"No return value.\">void</abbr> <strong>set_map_width</strong>(value: <a class=\"reference internal\" href=\"../class_int/#class-int\"><span class=\"std std-ref\">int</span></a>)</p></li>\n<li><p><a class=\"reference internal\" href=\"../class_int/#class-int\"><span class=\"std std-ref\">int</span></a> <strong>get_map_width</strong>()</p></li>\n</ul>\n<p>Number of vertices in the width of the heightmap. Changing this will resize the <a class=\"reference internal\" href=\"#class-heightmapshape3d-property-map-data\"><span class=\"std std-ref\">map_data</span></a>.</p>\n</section>\n<hr class=\"classref-section-separator docutils\" />\n<section class=\"classref-descriptions-group\" id=\"method-descriptions\">\n<h2>Method Descriptions<a class=\"headerlink\" href=\"#method-descriptions\" title=\"Link to this heading\">\uf0c1</a></h2>\n<p class=\"classref-method\" id=\"class-heightmapshape3d-method-get-max-height\"><a class=\"reference internal\" href=\"../class_float/#class-float\"><span class=\"std std-ref\">float</span></a> <strong>get_max_height</strong>() <abbr title=\"This method has no side effects. It doesn't modify any of the instance's member variables.\">const</abbr> <a class=\"reference internal\" href=\"#class-heightmapshape3d-method-get-max-height\"><span class=\"std std-ref\">\ud83d\udd17</span></a></p>\n<p>Returns the largest height value found in <a class=\"reference internal\" href=\"#class-heightmapshape3d-property-map-data\"><span class=\"std std-ref\">map_data</span></a>. Recalculates only when <a class=\"reference internal\" href=\"#class-heightmapshape3d-property-map-data\"><span class=\"std std-ref\">map_data</span></a> changes.</p>\n<hr class=\"classref-item-separator docutils\" />\n<p class=\"classref-method\" id=\"class-heightmapshape3d-method-get-min-height\"><a class=\"reference internal\" href=\"../class_float/#class-float\"><span class=\"std std-ref\">float</span></a> <strong>get_min_height</strong>() <abbr title=\"This method has no side effects. It doesn't modify any of the instance's member variables.\">const</abbr> <a class=\"reference internal\" href=\"#class-heightmapshape3d-method-get-min-height\"><span class=\"std std-ref\">\ud83d\udd17</span></a></p>\n<p>Returns the smallest height value found in <a class=\"reference internal\" href=\"#class-heightmapshape3d-property-map-data\"><span class=\"std std-ref\">map_data</span></a>. Recalculates only when <a class=\"reference internal\" href=\"#class-heightmapshape3d-property-map-data\"><span class=\"std std-ref\">map_data</span></a> changes.</p>\n<hr class=\"classref-item-separator docutils\" />\n<p class=\"classref-method\" id=\"class-heightmapshape3d-method-update-map-data-from-image\"><abbr title=\"No return value.\">void</abbr> <strong>update_map_data_from_image</strong>(image: <a class=\"reference internal\" href=\"../class_image/#class-image\"><span class=\"std std-ref\">Image</span></a>, height_min: <a class=\"reference internal\" href=\"../class_float/#class-float\"><span class=\"std std-ref\">float</span></a>, height_max: <a class=\"reference internal\" href=\"../class_float/#class-float\"><span class=\"std std-ref\">float</span></a>) <a class=\"reference internal\" href=\"#class-heightmapshape3d-method-update-map-data-from-image\"><span class=\"std std-ref\">\ud83d\udd17</span></a></p>\n<p>Updates <a class=\"reference internal\" href=\"#class-heightmapshape3d-property-map-data\"><span class=\"std std-ref\">map_data</span></a> with data read from an <a class=\"reference internal\" href=\"../class_image/#class-image\"><span class=\"std std-ref\">Image</span></a> reference. Automatically resizes heightmap <a class=\"reference internal\" href=\"#class-heightmapshape3d-property-map-width\"><span class=\"std std-ref\">map_width</span></a> and <a class=\"reference internal\" href=\"#class-heightmapshape3d-property-map-depth\"><span class=\"std std-ref\">map_depth</span></a> to fit the full image width and height.</p>\n<p>The image needs to be in either <a class=\"reference internal\" href=\"../class_image/#class-image-constant-format-rf\"><span class=\"std std-ref\">Image.FORMAT_RF</span></a> (32 bit), <a class=\"reference internal\" href=\"../class_image/#class-image-constant-format-rh\"><span class=\"std std-ref\">Image.FORMAT_RH</span></a> (16 bit), or <a class=\"reference internal\" href=\"../class_image/#class-image-constant-format-r8\"><span class=\"std std-ref\">Image.FORMAT_R8</span></a> (8 bit).</p>\n<p>Each image pixel is read in as a float on the range from <code class=\"docutils literal notranslate\"><span class=\"pre\">0.0</span></code> (black pixel) to <code class=\"docutils literal notranslate\"><span class=\"pre\">1.0</span></code> (white pixel). This range value gets remapped to <code class=\"docutils literal notranslate\"><span class=\"pre\">height_min</span></code> and <code class=\"docutils literal notranslate\"><span class=\"pre\">height_max</span></code> to form the final height value.</p>\n<p><strong>Note:</strong> Using a heightmap with 16-bit or 32-bit data, stored in EXR or HDR format is recommended. Using 8-bit height data, or a format like PNG that Godot imports as 8-bit, will result in a terraced terrain.</p>\n</section>\n</section>\n", "metatags": "<meta name=\"viewport\" content=\"width=device-width, initial-scale=1\" />\n", "rellinks": [["genindex", "General Index", "I", "index"], ["classes/class_image", "Image", "N", "next"], ["classes/class_gradienttexture2d", "GradientTexture2D", "P", "previous"]], "sourcename": "classes/class_heightmapshape3d.rst.txt", "toc": "<ul>\n<li><a class=\"reference internal\" href=\"#\">HeightMapShape3D</a><ul>\n<li><a class=\"reference internal\" href=\"#description\">Description</a></li>\n<li><a class=\"reference internal\" href=\"#properties\">Properties</a></li>\n<li><a class=\"reference internal\" href=\"#methods\">Methods</a></li>\n<li><a class=\"reference internal\" href=\"#property-descriptions\">Property Descriptions</a></li>\n<li><a class=\"reference internal\" href=\"#method-descriptions\">Method Descriptions</a></li>\n</ul>\n</li>\n</ul>\n", "display_toc": true, "page_source_suffix": ".rst", "current_page_name": "classes/class_heightmapshape3d", "sidebars": ["localtoc.html", "relations.html", "sourcelink.html", "searchbox.html"], "alabaster_version": "1.0.0", "alabaster_version_info": [1, 0, 0], "sphinx_version_info": [8, 1, 3, "final", 0], "READTHEDOCS": false}