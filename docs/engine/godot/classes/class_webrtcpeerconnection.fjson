{"parents": [{"link": "../", "title": "All classes"}], "prev": {"link": "../class_webrtcmultiplayerpeer/", "title": "WebRTCMultiplayerPeer"}, "next": {"link": "../class_webrtcpeerconnectionextension/", "title": "WebRTCPeerConnectionExtension"}, "title": "WebRTCPeerConnection", "meta": {"github_url": "hide"}, "body": "<section id=\"webrtcpeerconnection\">\n<span id=\"class-webrtcpeerconnection\"></span><h1>WebRTCPeerConnection<a class=\"headerlink\" href=\"#webrtcpeerconnection\" title=\"Link to this heading\">\uf0c1</a></h1>\n<p><strong>Inherits:</strong> <a class=\"reference internal\" href=\"../class_refcounted/#class-refcounted\"><span class=\"std std-ref\">RefCounted</span></a> <strong>&lt;</strong> <a class=\"reference internal\" href=\"../class_object/#class-object\"><span class=\"std std-ref\">Object</span></a></p>\n<p><strong>Inherited By:</strong> <a class=\"reference internal\" href=\"../class_webrtcpeerconnectionextension/#class-webrtcpeerconnectionextension\"><span class=\"std std-ref\">WebRTCPeerConnectionExtension</span></a></p>\n<p>Interface to a WebRTC peer connection.</p>\n<section class=\"classref-introduction-group\" id=\"description\">\n<h2>Description<a class=\"headerlink\" href=\"#description\" title=\"Link to this heading\">\uf0c1</a></h2>\n<p>A WebRTC connection between the local computer and a remote peer. Provides an interface to connect, maintain, and monitor the connection.</p>\n<p>Setting up a WebRTC connection between two peers may not seem a trivial task, but it can be broken down into 3 main steps:</p>\n<ul class=\"simple\">\n<li><p>The peer that wants to initiate the connection (<code class=\"docutils literal notranslate\"><span class=\"pre\">A</span></code> from now on) creates an offer and sends it to the other peer (<code class=\"docutils literal notranslate\"><span class=\"pre\">B</span></code> from now on).</p></li>\n<li><p><code class=\"docutils literal notranslate\"><span class=\"pre\">B</span></code> receives the offer, generates an answer, and sends it to <code class=\"docutils literal notranslate\"><span class=\"pre\">A</span></code>.</p></li>\n<li><p><code class=\"docutils literal notranslate\"><span class=\"pre\">A</span></code> and <code class=\"docutils literal notranslate\"><span class=\"pre\">B</span></code> then generate and exchange ICE candidates with each other.</p></li>\n</ul>\n<p>After these steps, the connection should be established. Refer to the linked tutorials for details.</p>\n</section>\n<section class=\"classref-introduction-group\" id=\"tutorials\">\n<h2>Tutorials<a class=\"headerlink\" href=\"#tutorials\" title=\"Link to this heading\">\uf0c1</a></h2>\n<ul class=\"simple\">\n<li><p><a class=\"reference internal\" href=\"../../tutorials/networking/webrtc/\"><span class=\"doc\">WebRTC documentation</span></a></p></li>\n<li><p><a class=\"reference internal\" href=\"../../tutorials/networking/high_level_multiplayer/\"><span class=\"doc\">High-level multiplayer</span></a></p></li>\n</ul>\n</section>\n<section class=\"classref-reftable-group\" id=\"methods\">\n<h2>Methods<a class=\"headerlink\" href=\"#methods\" title=\"Link to this heading\">\uf0c1</a></h2>\n<table class=\"docutils align-default\">\n<tbody>\n<tr class=\"row-odd\"><td><p><a class=\"reference internal\" href=\"../class_&#64;globalscope/#enum-globalscope-error\"><span class=\"std std-ref\">Error</span></a></p></td>\n<td><p><a class=\"reference internal\" href=\"#class-webrtcpeerconnection-method-add-ice-candidate\"><span class=\"std std-ref\">add_ice_candidate</span></a>(media: <a class=\"reference internal\" href=\"../class_string/#class-string\"><span class=\"std std-ref\">String</span></a>, index: <a class=\"reference internal\" href=\"../class_int/#class-int\"><span class=\"std std-ref\">int</span></a>, name: <a class=\"reference internal\" href=\"../class_string/#class-string\"><span class=\"std std-ref\">String</span></a>)</p></td>\n</tr>\n<tr class=\"row-even\"><td><p><abbr title=\"No return value.\">void</abbr></p></td>\n<td><p><a class=\"reference internal\" href=\"#class-webrtcpeerconnection-method-close\"><span class=\"std std-ref\">close</span></a>()</p></td>\n</tr>\n<tr class=\"row-odd\"><td><p><a class=\"reference internal\" href=\"../class_webrtcdatachannel/#class-webrtcdatachannel\"><span class=\"std std-ref\">WebRTCDataChannel</span></a></p></td>\n<td><p><a class=\"reference internal\" href=\"#class-webrtcpeerconnection-method-create-data-channel\"><span class=\"std std-ref\">create_data_channel</span></a>(label: <a class=\"reference internal\" href=\"../class_string/#class-string\"><span class=\"std std-ref\">String</span></a>, options: <a class=\"reference internal\" href=\"../class_dictionary/#class-dictionary\"><span class=\"std std-ref\">Dictionary</span></a> = {})</p></td>\n</tr>\n<tr class=\"row-even\"><td><p><a class=\"reference internal\" href=\"../class_&#64;globalscope/#enum-globalscope-error\"><span class=\"std std-ref\">Error</span></a></p></td>\n<td><p><a class=\"reference internal\" href=\"#class-webrtcpeerconnection-method-create-offer\"><span class=\"std std-ref\">create_offer</span></a>()</p></td>\n</tr>\n<tr class=\"row-odd\"><td><p><a class=\"reference internal\" href=\"#enum-webrtcpeerconnection-connectionstate\"><span class=\"std std-ref\">ConnectionState</span></a></p></td>\n<td><p><a class=\"reference internal\" href=\"#class-webrtcpeerconnection-method-get-connection-state\"><span class=\"std std-ref\">get_connection_state</span></a>() <abbr title=\"This method has no side effects. It doesn't modify any of the instance's member variables.\">const</abbr></p></td>\n</tr>\n<tr class=\"row-even\"><td><p><a class=\"reference internal\" href=\"#enum-webrtcpeerconnection-gatheringstate\"><span class=\"std std-ref\">GatheringState</span></a></p></td>\n<td><p><a class=\"reference internal\" href=\"#class-webrtcpeerconnection-method-get-gathering-state\"><span class=\"std std-ref\">get_gathering_state</span></a>() <abbr title=\"This method has no side effects. It doesn't modify any of the instance's member variables.\">const</abbr></p></td>\n</tr>\n<tr class=\"row-odd\"><td><p><a class=\"reference internal\" href=\"#enum-webrtcpeerconnection-signalingstate\"><span class=\"std std-ref\">SignalingState</span></a></p></td>\n<td><p><a class=\"reference internal\" href=\"#class-webrtcpeerconnection-method-get-signaling-state\"><span class=\"std std-ref\">get_signaling_state</span></a>() <abbr title=\"This method has no side effects. It doesn't modify any of the instance's member variables.\">const</abbr></p></td>\n</tr>\n<tr class=\"row-even\"><td><p><a class=\"reference internal\" href=\"../class_&#64;globalscope/#enum-globalscope-error\"><span class=\"std std-ref\">Error</span></a></p></td>\n<td><p><a class=\"reference internal\" href=\"#class-webrtcpeerconnection-method-initialize\"><span class=\"std std-ref\">initialize</span></a>(configuration: <a class=\"reference internal\" href=\"../class_dictionary/#class-dictionary\"><span class=\"std std-ref\">Dictionary</span></a> = {})</p></td>\n</tr>\n<tr class=\"row-odd\"><td><p><a class=\"reference internal\" href=\"../class_&#64;globalscope/#enum-globalscope-error\"><span class=\"std std-ref\">Error</span></a></p></td>\n<td><p><a class=\"reference internal\" href=\"#class-webrtcpeerconnection-method-poll\"><span class=\"std std-ref\">poll</span></a>()</p></td>\n</tr>\n<tr class=\"row-even\"><td><p><abbr title=\"No return value.\">void</abbr></p></td>\n<td><p><a class=\"reference internal\" href=\"#class-webrtcpeerconnection-method-set-default-extension\"><span class=\"std std-ref\">set_default_extension</span></a>(extension_class: <a class=\"reference internal\" href=\"../class_stringname/#class-stringname\"><span class=\"std std-ref\">StringName</span></a>) <abbr title=\"This method doesn't need an instance to be called, so it can be called directly using the class name.\">static</abbr></p></td>\n</tr>\n<tr class=\"row-odd\"><td><p><a class=\"reference internal\" href=\"../class_&#64;globalscope/#enum-globalscope-error\"><span class=\"std std-ref\">Error</span></a></p></td>\n<td><p><a class=\"reference internal\" href=\"#class-webrtcpeerconnection-method-set-local-description\"><span class=\"std std-ref\">set_local_description</span></a>(type: <a class=\"reference internal\" href=\"../class_string/#class-string\"><span class=\"std std-ref\">String</span></a>, sdp: <a class=\"reference internal\" href=\"../class_string/#class-string\"><span class=\"std std-ref\">String</span></a>)</p></td>\n</tr>\n<tr class=\"row-even\"><td><p><a class=\"reference internal\" href=\"../class_&#64;globalscope/#enum-globalscope-error\"><span class=\"std std-ref\">Error</span></a></p></td>\n<td><p><a class=\"reference internal\" href=\"#class-webrtcpeerconnection-method-set-remote-description\"><span class=\"std std-ref\">set_remote_description</span></a>(type: <a class=\"reference internal\" href=\"../class_string/#class-string\"><span class=\"std std-ref\">String</span></a>, sdp: <a class=\"reference internal\" href=\"../class_string/#class-string\"><span class=\"std std-ref\">String</span></a>)</p></td>\n</tr>\n</tbody>\n</table>\n</section>\n<hr class=\"classref-section-separator docutils\" />\n<section class=\"classref-descriptions-group\" id=\"signals\">\n<h2>Signals<a class=\"headerlink\" href=\"#signals\" title=\"Link to this heading\">\uf0c1</a></h2>\n<p class=\"classref-signal\" id=\"class-webrtcpeerconnection-signal-data-channel-received\"><strong>data_channel_received</strong>(channel: <a class=\"reference internal\" href=\"../class_webrtcdatachannel/#class-webrtcdatachannel\"><span class=\"std std-ref\">WebRTCDataChannel</span></a>) <a class=\"reference internal\" href=\"#class-webrtcpeerconnection-signal-data-channel-received\"><span class=\"std std-ref\">\ud83d\udd17</span></a></p>\n<p>Emitted when a new in-band channel is received, i.e. when the channel was created with <code class=\"docutils literal notranslate\"><span class=\"pre\">negotiated:</span> <span class=\"pre\">false</span></code> (default).</p>\n<p>The object will be an instance of <a class=\"reference internal\" href=\"../class_webrtcdatachannel/#class-webrtcdatachannel\"><span class=\"std std-ref\">WebRTCDataChannel</span></a>. You must keep a reference of it or it will be closed automatically. See <a class=\"reference internal\" href=\"#class-webrtcpeerconnection-method-create-data-channel\"><span class=\"std std-ref\">create_data_channel()</span></a>.</p>\n<hr class=\"classref-item-separator docutils\" />\n<p class=\"classref-signal\" id=\"class-webrtcpeerconnection-signal-ice-candidate-created\"><strong>ice_candidate_created</strong>(media: <a class=\"reference internal\" href=\"../class_string/#class-string\"><span class=\"std std-ref\">String</span></a>, index: <a class=\"reference internal\" href=\"../class_int/#class-int\"><span class=\"std std-ref\">int</span></a>, name: <a class=\"reference internal\" href=\"../class_string/#class-string\"><span class=\"std std-ref\">String</span></a>) <a class=\"reference internal\" href=\"#class-webrtcpeerconnection-signal-ice-candidate-created\"><span class=\"std std-ref\">\ud83d\udd17</span></a></p>\n<p>Emitted when a new ICE candidate has been created. The three parameters are meant to be passed to the remote peer over the signaling server.</p>\n<hr class=\"classref-item-separator docutils\" />\n<p class=\"classref-signal\" id=\"class-webrtcpeerconnection-signal-session-description-created\"><strong>session_description_created</strong>(type: <a class=\"reference internal\" href=\"../class_string/#class-string\"><span class=\"std std-ref\">String</span></a>, sdp: <a class=\"reference internal\" href=\"../class_string/#class-string\"><span class=\"std std-ref\">String</span></a>) <a class=\"reference internal\" href=\"#class-webrtcpeerconnection-signal-session-description-created\"><span class=\"std std-ref\">\ud83d\udd17</span></a></p>\n<p>Emitted after a successful call to <a class=\"reference internal\" href=\"#class-webrtcpeerconnection-method-create-offer\"><span class=\"std std-ref\">create_offer()</span></a> or <a class=\"reference internal\" href=\"#class-webrtcpeerconnection-method-set-remote-description\"><span class=\"std std-ref\">set_remote_description()</span></a> (when it generates an answer). The parameters are meant to be passed to <a class=\"reference internal\" href=\"#class-webrtcpeerconnection-method-set-local-description\"><span class=\"std std-ref\">set_local_description()</span></a> on this object, and sent to the remote peer over the signaling server.</p>\n</section>\n<hr class=\"classref-section-separator docutils\" />\n<section class=\"classref-descriptions-group\" id=\"enumerations\">\n<h2>Enumerations<a class=\"headerlink\" href=\"#enumerations\" title=\"Link to this heading\">\uf0c1</a></h2>\n<p class=\"classref-enumeration\" id=\"enum-webrtcpeerconnection-connectionstate\">enum <strong>ConnectionState</strong>: <a class=\"reference internal\" href=\"#enum-webrtcpeerconnection-connectionstate\"><span class=\"std std-ref\">\ud83d\udd17</span></a></p>\n<p class=\"classref-enumeration-constant\" id=\"class-webrtcpeerconnection-constant-state-new\"><a class=\"reference internal\" href=\"#enum-webrtcpeerconnection-connectionstate\"><span class=\"std std-ref\">ConnectionState</span></a> <strong>STATE_NEW</strong> = <code class=\"docutils literal notranslate\"><span class=\"pre\">0</span></code></p>\n<p>The connection is new, data channels and an offer can be created in this state.</p>\n<p class=\"classref-enumeration-constant\" id=\"class-webrtcpeerconnection-constant-state-connecting\"><a class=\"reference internal\" href=\"#enum-webrtcpeerconnection-connectionstate\"><span class=\"std std-ref\">ConnectionState</span></a> <strong>STATE_CONNECTING</strong> = <code class=\"docutils literal notranslate\"><span class=\"pre\">1</span></code></p>\n<p>The peer is connecting, ICE is in progress, none of the transports has failed.</p>\n<p class=\"classref-enumeration-constant\" id=\"class-webrtcpeerconnection-constant-state-connected\"><a class=\"reference internal\" href=\"#enum-webrtcpeerconnection-connectionstate\"><span class=\"std std-ref\">ConnectionState</span></a> <strong>STATE_CONNECTED</strong> = <code class=\"docutils literal notranslate\"><span class=\"pre\">2</span></code></p>\n<p>The peer is connected, all ICE transports are connected.</p>\n<p class=\"classref-enumeration-constant\" id=\"class-webrtcpeerconnection-constant-state-disconnected\"><a class=\"reference internal\" href=\"#enum-webrtcpeerconnection-connectionstate\"><span class=\"std std-ref\">ConnectionState</span></a> <strong>STATE_DISCONNECTED</strong> = <code class=\"docutils literal notranslate\"><span class=\"pre\">3</span></code></p>\n<p>At least one ICE transport is disconnected.</p>\n<p class=\"classref-enumeration-constant\" id=\"class-webrtcpeerconnection-constant-state-failed\"><a class=\"reference internal\" href=\"#enum-webrtcpeerconnection-connectionstate\"><span class=\"std std-ref\">ConnectionState</span></a> <strong>STATE_FAILED</strong> = <code class=\"docutils literal notranslate\"><span class=\"pre\">4</span></code></p>\n<p>One or more of the ICE transports failed.</p>\n<p class=\"classref-enumeration-constant\" id=\"class-webrtcpeerconnection-constant-state-closed\"><a class=\"reference internal\" href=\"#enum-webrtcpeerconnection-connectionstate\"><span class=\"std std-ref\">ConnectionState</span></a> <strong>STATE_CLOSED</strong> = <code class=\"docutils literal notranslate\"><span class=\"pre\">5</span></code></p>\n<p>The peer connection is closed (after calling <a class=\"reference internal\" href=\"#class-webrtcpeerconnection-method-close\"><span class=\"std std-ref\">close()</span></a> for example).</p>\n<hr class=\"classref-item-separator docutils\" />\n<p class=\"classref-enumeration\" id=\"enum-webrtcpeerconnection-gatheringstate\">enum <strong>GatheringState</strong>: <a class=\"reference internal\" href=\"#enum-webrtcpeerconnection-gatheringstate\"><span class=\"std std-ref\">\ud83d\udd17</span></a></p>\n<p class=\"classref-enumeration-constant\" id=\"class-webrtcpeerconnection-constant-gathering-state-new\"><a class=\"reference internal\" href=\"#enum-webrtcpeerconnection-gatheringstate\"><span class=\"std std-ref\">GatheringState</span></a> <strong>GATHERING_STATE_NEW</strong> = <code class=\"docutils literal notranslate\"><span class=\"pre\">0</span></code></p>\n<p>The peer connection was just created and hasn't done any networking yet.</p>\n<p class=\"classref-enumeration-constant\" id=\"class-webrtcpeerconnection-constant-gathering-state-gathering\"><a class=\"reference internal\" href=\"#enum-webrtcpeerconnection-gatheringstate\"><span class=\"std std-ref\">GatheringState</span></a> <strong>GATHERING_STATE_GATHERING</strong> = <code class=\"docutils literal notranslate\"><span class=\"pre\">1</span></code></p>\n<p>The ICE agent is in the process of gathering candidates for the connection.</p>\n<p class=\"classref-enumeration-constant\" id=\"class-webrtcpeerconnection-constant-gathering-state-complete\"><a class=\"reference internal\" href=\"#enum-webrtcpeerconnection-gatheringstate\"><span class=\"std std-ref\">GatheringState</span></a> <strong>GATHERING_STATE_COMPLETE</strong> = <code class=\"docutils literal notranslate\"><span class=\"pre\">2</span></code></p>\n<p>The ICE agent has finished gathering candidates. If something happens that requires collecting new candidates, such as a new interface being added or the addition of a new ICE server, the state will revert to gathering to gather those candidates.</p>\n<hr class=\"classref-item-separator docutils\" />\n<p class=\"classref-enumeration\" id=\"enum-webrtcpeerconnection-signalingstate\">enum <strong>SignalingState</strong>: <a class=\"reference internal\" href=\"#enum-webrtcpeerconnection-signalingstate\"><span class=\"std std-ref\">\ud83d\udd17</span></a></p>\n<p class=\"classref-enumeration-constant\" id=\"class-webrtcpeerconnection-constant-signaling-state-stable\"><a class=\"reference internal\" href=\"#enum-webrtcpeerconnection-signalingstate\"><span class=\"std std-ref\">SignalingState</span></a> <strong>SIGNALING_STATE_STABLE</strong> = <code class=\"docutils literal notranslate\"><span class=\"pre\">0</span></code></p>\n<p>There is no ongoing exchange of offer and answer underway. This may mean that the <strong>WebRTCPeerConnection</strong> is new (<a class=\"reference internal\" href=\"#class-webrtcpeerconnection-constant-state-new\"><span class=\"std std-ref\">STATE_NEW</span></a>) or that negotiation is complete and a connection has been established (<a class=\"reference internal\" href=\"#class-webrtcpeerconnection-constant-state-connected\"><span class=\"std std-ref\">STATE_CONNECTED</span></a>).</p>\n<p class=\"classref-enumeration-constant\" id=\"class-webrtcpeerconnection-constant-signaling-state-have-local-offer\"><a class=\"reference internal\" href=\"#enum-webrtcpeerconnection-signalingstate\"><span class=\"std std-ref\">SignalingState</span></a> <strong>SIGNALING_STATE_HAVE_LOCAL_OFFER</strong> = <code class=\"docutils literal notranslate\"><span class=\"pre\">1</span></code></p>\n<p>The local peer has called <a class=\"reference internal\" href=\"#class-webrtcpeerconnection-method-set-local-description\"><span class=\"std std-ref\">set_local_description()</span></a>, passing in SDP representing an offer (usually created by calling <a class=\"reference internal\" href=\"#class-webrtcpeerconnection-method-create-offer\"><span class=\"std std-ref\">create_offer()</span></a>), and the offer has been applied successfully.</p>\n<p class=\"classref-enumeration-constant\" id=\"class-webrtcpeerconnection-constant-signaling-state-have-remote-offer\"><a class=\"reference internal\" href=\"#enum-webrtcpeerconnection-signalingstate\"><span class=\"std std-ref\">SignalingState</span></a> <strong>SIGNALING_STATE_HAVE_REMOTE_OFFER</strong> = <code class=\"docutils literal notranslate\"><span class=\"pre\">2</span></code></p>\n<p>The remote peer has created an offer and used the signaling server to deliver it to the local peer, which has set the offer as the remote description by calling <a class=\"reference internal\" href=\"#class-webrtcpeerconnection-method-set-remote-description\"><span class=\"std std-ref\">set_remote_description()</span></a>.</p>\n<p class=\"classref-enumeration-constant\" id=\"class-webrtcpeerconnection-constant-signaling-state-have-local-pranswer\"><a class=\"reference internal\" href=\"#enum-webrtcpeerconnection-signalingstate\"><span class=\"std std-ref\">SignalingState</span></a> <strong>SIGNALING_STATE_HAVE_LOCAL_PRANSWER</strong> = <code class=\"docutils literal notranslate\"><span class=\"pre\">3</span></code></p>\n<p>The offer sent by the remote peer has been applied and an answer has been created and applied by calling <a class=\"reference internal\" href=\"#class-webrtcpeerconnection-method-set-local-description\"><span class=\"std std-ref\">set_local_description()</span></a>. This provisional answer describes the supported media formats and so forth, but may not have a complete set of ICE candidates included. Further candidates will be delivered separately later.</p>\n<p class=\"classref-enumeration-constant\" id=\"class-webrtcpeerconnection-constant-signaling-state-have-remote-pranswer\"><a class=\"reference internal\" href=\"#enum-webrtcpeerconnection-signalingstate\"><span class=\"std std-ref\">SignalingState</span></a> <strong>SIGNALING_STATE_HAVE_REMOTE_PRANSWER</strong> = <code class=\"docutils literal notranslate\"><span class=\"pre\">4</span></code></p>\n<p>A provisional answer has been received and successfully applied in response to an offer previously sent and established by calling <a class=\"reference internal\" href=\"#class-webrtcpeerconnection-method-set-local-description\"><span class=\"std std-ref\">set_local_description()</span></a>.</p>\n<p class=\"classref-enumeration-constant\" id=\"class-webrtcpeerconnection-constant-signaling-state-closed\"><a class=\"reference internal\" href=\"#enum-webrtcpeerconnection-signalingstate\"><span class=\"std std-ref\">SignalingState</span></a> <strong>SIGNALING_STATE_CLOSED</strong> = <code class=\"docutils literal notranslate\"><span class=\"pre\">5</span></code></p>\n<p>The <strong>WebRTCPeerConnection</strong> has been closed.</p>\n</section>\n<hr class=\"classref-section-separator docutils\" />\n<section class=\"classref-descriptions-group\" id=\"method-descriptions\">\n<h2>Method Descriptions<a class=\"headerlink\" href=\"#method-descriptions\" title=\"Link to this heading\">\uf0c1</a></h2>\n<p class=\"classref-method\" id=\"class-webrtcpeerconnection-method-add-ice-candidate\"><a class=\"reference internal\" href=\"../class_&#64;globalscope/#enum-globalscope-error\"><span class=\"std std-ref\">Error</span></a> <strong>add_ice_candidate</strong>(media: <a class=\"reference internal\" href=\"../class_string/#class-string\"><span class=\"std std-ref\">String</span></a>, index: <a class=\"reference internal\" href=\"../class_int/#class-int\"><span class=\"std std-ref\">int</span></a>, name: <a class=\"reference internal\" href=\"../class_string/#class-string\"><span class=\"std std-ref\">String</span></a>) <a class=\"reference internal\" href=\"#class-webrtcpeerconnection-method-add-ice-candidate\"><span class=\"std std-ref\">\ud83d\udd17</span></a></p>\n<p>Add an ice candidate generated by a remote peer (and received over the signaling server). See <a class=\"reference internal\" href=\"#class-webrtcpeerconnection-signal-ice-candidate-created\"><span class=\"std std-ref\">ice_candidate_created</span></a>.</p>\n<hr class=\"classref-item-separator docutils\" />\n<p class=\"classref-method\" id=\"class-webrtcpeerconnection-method-close\"><abbr title=\"No return value.\">void</abbr> <strong>close</strong>() <a class=\"reference internal\" href=\"#class-webrtcpeerconnection-method-close\"><span class=\"std std-ref\">\ud83d\udd17</span></a></p>\n<p>Close the peer connection and all data channels associated with it.</p>\n<p><strong>Note:</strong> You cannot reuse this object for a new connection unless you call <a class=\"reference internal\" href=\"#class-webrtcpeerconnection-method-initialize\"><span class=\"std std-ref\">initialize()</span></a>.</p>\n<hr class=\"classref-item-separator docutils\" />\n<p class=\"classref-method\" id=\"class-webrtcpeerconnection-method-create-data-channel\"><a class=\"reference internal\" href=\"../class_webrtcdatachannel/#class-webrtcdatachannel\"><span class=\"std std-ref\">WebRTCDataChannel</span></a> <strong>create_data_channel</strong>(label: <a class=\"reference internal\" href=\"../class_string/#class-string\"><span class=\"std std-ref\">String</span></a>, options: <a class=\"reference internal\" href=\"../class_dictionary/#class-dictionary\"><span class=\"std std-ref\">Dictionary</span></a> = {}) <a class=\"reference internal\" href=\"#class-webrtcpeerconnection-method-create-data-channel\"><span class=\"std std-ref\">\ud83d\udd17</span></a></p>\n<p>Returns a new <a class=\"reference internal\" href=\"../class_webrtcdatachannel/#class-webrtcdatachannel\"><span class=\"std std-ref\">WebRTCDataChannel</span></a> (or <code class=\"docutils literal notranslate\"><span class=\"pre\">null</span></code> on failure) with given <code class=\"docutils literal notranslate\"><span class=\"pre\">label</span></code> and optionally configured via the <code class=\"docutils literal notranslate\"><span class=\"pre\">options</span></code> dictionary. This method can only be called when the connection is in state <a class=\"reference internal\" href=\"#class-webrtcpeerconnection-constant-state-new\"><span class=\"std std-ref\">STATE_NEW</span></a>.</p>\n<p>There are two ways to create a working data channel: either call <a class=\"reference internal\" href=\"#class-webrtcpeerconnection-method-create-data-channel\"><span class=\"std std-ref\">create_data_channel()</span></a> on only one of the peer and listen to <a class=\"reference internal\" href=\"#class-webrtcpeerconnection-signal-data-channel-received\"><span class=\"std std-ref\">data_channel_received</span></a> on the other, or call <a class=\"reference internal\" href=\"#class-webrtcpeerconnection-method-create-data-channel\"><span class=\"std std-ref\">create_data_channel()</span></a> on both peers, with the same values, and the <code class=\"docutils literal notranslate\"><span class=\"pre\">&quot;negotiated&quot;</span></code> option set to <code class=\"docutils literal notranslate\"><span class=\"pre\">true</span></code>.</p>\n<p>Valid <code class=\"docutils literal notranslate\"><span class=\"pre\">options</span></code> are:</p>\n<div class=\"highlight-gdscript notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"p\">{</span>\n<span class=\"w\">    </span><span class=\"s2\">&quot;negotiated&quot;</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"l\">true</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"c1\"># When set to true (default off), means the channel is negotiated out of band. &quot;id&quot; must be set too. &quot;data_channel_received&quot; will not be called.</span>\n<span class=\"w\">    </span><span class=\"s2\">&quot;id&quot;</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"c1\"># When &quot;negotiated&quot; is true this value must also be set to the same value on both peer.</span>\n\n<span class=\"w\">    </span><span class=\"c1\"># Only one of maxRetransmits and maxPacketLifeTime can be specified, not both. They make the channel unreliable (but also better at real time).</span>\n<span class=\"w\">    </span><span class=\"s2\">&quot;maxRetransmits&quot;</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"c1\"># Specify the maximum number of attempt the peer will make to retransmits packets if they are not acknowledged.</span>\n<span class=\"w\">    </span><span class=\"s2\">&quot;maxPacketLifeTime&quot;</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"mi\">100</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"c1\"># Specify the maximum amount of time before giving up retransmitions of unacknowledged packets (in milliseconds).</span>\n<span class=\"w\">    </span><span class=\"s2\">&quot;ordered&quot;</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"l\">true</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"c1\"># When in unreliable mode (i.e. either &quot;maxRetransmits&quot; or &quot;maxPacketLifetime&quot; is set), &quot;ordered&quot; (true by default) specify if packet ordering is to be enforced.</span>\n\n<span class=\"w\">    </span><span class=\"s2\">&quot;protocol&quot;</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">&quot;my-custom-protocol&quot;</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"c1\"># A custom sub-protocol string for this channel.</span>\n<span class=\"p\">}</span>\n</pre></div>\n</div>\n<p><strong>Note:</strong> You must keep a reference to channels created this way, or it will be closed.</p>\n<hr class=\"classref-item-separator docutils\" />\n<p class=\"classref-method\" id=\"class-webrtcpeerconnection-method-create-offer\"><a class=\"reference internal\" href=\"../class_&#64;globalscope/#enum-globalscope-error\"><span class=\"std std-ref\">Error</span></a> <strong>create_offer</strong>() <a class=\"reference internal\" href=\"#class-webrtcpeerconnection-method-create-offer\"><span class=\"std std-ref\">\ud83d\udd17</span></a></p>\n<p>Creates a new SDP offer to start a WebRTC connection with a remote peer. At least one <a class=\"reference internal\" href=\"../class_webrtcdatachannel/#class-webrtcdatachannel\"><span class=\"std std-ref\">WebRTCDataChannel</span></a> must have been created before calling this method.</p>\n<p>If this functions returns <a class=\"reference internal\" href=\"../class_&#64;globalscope/#class-globalscope-constant-ok\"><span class=\"std std-ref\">&#64;GlobalScope.OK</span></a>, <a class=\"reference internal\" href=\"#class-webrtcpeerconnection-signal-session-description-created\"><span class=\"std std-ref\">session_description_created</span></a> will be called when the session is ready to be sent.</p>\n<hr class=\"classref-item-separator docutils\" />\n<p class=\"classref-method\" id=\"class-webrtcpeerconnection-method-get-connection-state\"><a class=\"reference internal\" href=\"#enum-webrtcpeerconnection-connectionstate\"><span class=\"std std-ref\">ConnectionState</span></a> <strong>get_connection_state</strong>() <abbr title=\"This method has no side effects. It doesn't modify any of the instance's member variables.\">const</abbr> <a class=\"reference internal\" href=\"#class-webrtcpeerconnection-method-get-connection-state\"><span class=\"std std-ref\">\ud83d\udd17</span></a></p>\n<p>Returns the connection state.</p>\n<hr class=\"classref-item-separator docutils\" />\n<p class=\"classref-method\" id=\"class-webrtcpeerconnection-method-get-gathering-state\"><a class=\"reference internal\" href=\"#enum-webrtcpeerconnection-gatheringstate\"><span class=\"std std-ref\">GatheringState</span></a> <strong>get_gathering_state</strong>() <abbr title=\"This method has no side effects. It doesn't modify any of the instance's member variables.\">const</abbr> <a class=\"reference internal\" href=\"#class-webrtcpeerconnection-method-get-gathering-state\"><span class=\"std std-ref\">\ud83d\udd17</span></a></p>\n<p>Returns the ICE <a class=\"reference internal\" href=\"#enum-webrtcpeerconnection-gatheringstate\"><span class=\"std std-ref\">GatheringState</span></a> of the connection. This lets you detect, for example, when collection of ICE candidates has finished.</p>\n<hr class=\"classref-item-separator docutils\" />\n<p class=\"classref-method\" id=\"class-webrtcpeerconnection-method-get-signaling-state\"><a class=\"reference internal\" href=\"#enum-webrtcpeerconnection-signalingstate\"><span class=\"std std-ref\">SignalingState</span></a> <strong>get_signaling_state</strong>() <abbr title=\"This method has no side effects. It doesn't modify any of the instance's member variables.\">const</abbr> <a class=\"reference internal\" href=\"#class-webrtcpeerconnection-method-get-signaling-state\"><span class=\"std std-ref\">\ud83d\udd17</span></a></p>\n<p>Returns the signaling state on the local end of the connection while connecting or reconnecting to another peer.</p>\n<hr class=\"classref-item-separator docutils\" />\n<p class=\"classref-method\" id=\"class-webrtcpeerconnection-method-initialize\"><a class=\"reference internal\" href=\"../class_&#64;globalscope/#enum-globalscope-error\"><span class=\"std std-ref\">Error</span></a> <strong>initialize</strong>(configuration: <a class=\"reference internal\" href=\"../class_dictionary/#class-dictionary\"><span class=\"std std-ref\">Dictionary</span></a> = {}) <a class=\"reference internal\" href=\"#class-webrtcpeerconnection-method-initialize\"><span class=\"std std-ref\">\ud83d\udd17</span></a></p>\n<p>Re-initialize this peer connection, closing any previously active connection, and going back to state <a class=\"reference internal\" href=\"#class-webrtcpeerconnection-constant-state-new\"><span class=\"std std-ref\">STATE_NEW</span></a>. A dictionary of <code class=\"docutils literal notranslate\"><span class=\"pre\">configuration</span></code> options can be passed to configure the peer connection.</p>\n<p>Valid <code class=\"docutils literal notranslate\"><span class=\"pre\">configuration</span></code> options are:</p>\n<div class=\"highlight-gdscript notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"p\">{</span>\n<span class=\"w\">    </span><span class=\"s2\">&quot;iceServers&quot;</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"p\">[</span>\n<span class=\"w\">        </span><span class=\"p\">{</span>\n<span class=\"w\">            </span><span class=\"s2\">&quot;urls&quot;</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"p\">[</span><span class=\"w\"> </span><span class=\"s2\">&quot;stun:stun.example.com:3478&quot;</span><span class=\"w\"> </span><span class=\"p\">],</span><span class=\"w\"> </span><span class=\"c1\"># One or more STUN servers.</span>\n<span class=\"w\">        </span><span class=\"p\">},</span>\n<span class=\"w\">        </span><span class=\"p\">{</span>\n<span class=\"w\">            </span><span class=\"s2\">&quot;urls&quot;</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"p\">[</span><span class=\"w\"> </span><span class=\"s2\">&quot;turn:turn.example.com:3478&quot;</span><span class=\"w\"> </span><span class=\"p\">],</span><span class=\"w\"> </span><span class=\"c1\"># One or more TURN servers.</span>\n<span class=\"w\">            </span><span class=\"s2\">&quot;username&quot;</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">&quot;a_username&quot;</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"c1\"># Optional username for the TURN server.</span>\n<span class=\"w\">            </span><span class=\"s2\">&quot;credential&quot;</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">&quot;a_password&quot;</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"c1\"># Optional password for the TURN server.</span>\n<span class=\"w\">        </span><span class=\"p\">}</span>\n<span class=\"w\">    </span><span class=\"p\">]</span>\n<span class=\"p\">}</span>\n</pre></div>\n</div>\n<hr class=\"classref-item-separator docutils\" />\n<p class=\"classref-method\" id=\"class-webrtcpeerconnection-method-poll\"><a class=\"reference internal\" href=\"../class_&#64;globalscope/#enum-globalscope-error\"><span class=\"std std-ref\">Error</span></a> <strong>poll</strong>() <a class=\"reference internal\" href=\"#class-webrtcpeerconnection-method-poll\"><span class=\"std std-ref\">\ud83d\udd17</span></a></p>\n<p>Call this method frequently (e.g. in <a class=\"reference internal\" href=\"../class_node/#class-node-private-method-process\"><span class=\"std std-ref\">Node._process()</span></a> or <a class=\"reference internal\" href=\"../class_node/#class-node-private-method-physics-process\"><span class=\"std std-ref\">Node._physics_process()</span></a>) to properly receive signals.</p>\n<hr class=\"classref-item-separator docutils\" />\n<p class=\"classref-method\" id=\"class-webrtcpeerconnection-method-set-default-extension\"><abbr title=\"No return value.\">void</abbr> <strong>set_default_extension</strong>(extension_class: <a class=\"reference internal\" href=\"../class_stringname/#class-stringname\"><span class=\"std std-ref\">StringName</span></a>) <abbr title=\"This method doesn't need an instance to be called, so it can be called directly using the class name.\">static</abbr> <a class=\"reference internal\" href=\"#class-webrtcpeerconnection-method-set-default-extension\"><span class=\"std std-ref\">\ud83d\udd17</span></a></p>\n<p>Sets the <code class=\"docutils literal notranslate\"><span class=\"pre\">extension_class</span></code> as the default <a class=\"reference internal\" href=\"../class_webrtcpeerconnectionextension/#class-webrtcpeerconnectionextension\"><span class=\"std std-ref\">WebRTCPeerConnectionExtension</span></a> returned when creating a new <strong>WebRTCPeerConnection</strong>.</p>\n<hr class=\"classref-item-separator docutils\" />\n<p class=\"classref-method\" id=\"class-webrtcpeerconnection-method-set-local-description\"><a class=\"reference internal\" href=\"../class_&#64;globalscope/#enum-globalscope-error\"><span class=\"std std-ref\">Error</span></a> <strong>set_local_description</strong>(type: <a class=\"reference internal\" href=\"../class_string/#class-string\"><span class=\"std std-ref\">String</span></a>, sdp: <a class=\"reference internal\" href=\"../class_string/#class-string\"><span class=\"std std-ref\">String</span></a>) <a class=\"reference internal\" href=\"#class-webrtcpeerconnection-method-set-local-description\"><span class=\"std std-ref\">\ud83d\udd17</span></a></p>\n<p>Sets the SDP description of the local peer. This should be called in response to <a class=\"reference internal\" href=\"#class-webrtcpeerconnection-signal-session-description-created\"><span class=\"std std-ref\">session_description_created</span></a>.</p>\n<p>After calling this function the peer will start emitting <a class=\"reference internal\" href=\"#class-webrtcpeerconnection-signal-ice-candidate-created\"><span class=\"std std-ref\">ice_candidate_created</span></a> (unless an <a class=\"reference internal\" href=\"../class_&#64;globalscope/#enum-globalscope-error\"><span class=\"std std-ref\">Error</span></a> different from <a class=\"reference internal\" href=\"../class_&#64;globalscope/#class-globalscope-constant-ok\"><span class=\"std std-ref\">&#64;GlobalScope.OK</span></a> is returned).</p>\n<hr class=\"classref-item-separator docutils\" />\n<p class=\"classref-method\" id=\"class-webrtcpeerconnection-method-set-remote-description\"><a class=\"reference internal\" href=\"../class_&#64;globalscope/#enum-globalscope-error\"><span class=\"std std-ref\">Error</span></a> <strong>set_remote_description</strong>(type: <a class=\"reference internal\" href=\"../class_string/#class-string\"><span class=\"std std-ref\">String</span></a>, sdp: <a class=\"reference internal\" href=\"../class_string/#class-string\"><span class=\"std std-ref\">String</span></a>) <a class=\"reference internal\" href=\"#class-webrtcpeerconnection-method-set-remote-description\"><span class=\"std std-ref\">\ud83d\udd17</span></a></p>\n<p>Sets the SDP description of the remote peer. This should be called with the values generated by a remote peer and received over the signaling server.</p>\n<p>If <code class=\"docutils literal notranslate\"><span class=\"pre\">type</span></code> is <code class=\"docutils literal notranslate\"><span class=\"pre\">&quot;offer&quot;</span></code> the peer will emit <a class=\"reference internal\" href=\"#class-webrtcpeerconnection-signal-session-description-created\"><span class=\"std std-ref\">session_description_created</span></a> with the appropriate answer.</p>\n<p>If <code class=\"docutils literal notranslate\"><span class=\"pre\">type</span></code> is <code class=\"docutils literal notranslate\"><span class=\"pre\">&quot;answer&quot;</span></code> the peer will start emitting <a class=\"reference internal\" href=\"#class-webrtcpeerconnection-signal-ice-candidate-created\"><span class=\"std std-ref\">ice_candidate_created</span></a>.</p>\n</section>\n</section>\n", "metatags": "<meta name=\"viewport\" content=\"width=device-width, initial-scale=1\" />\n", "rellinks": [["genindex", "General Index", "I", "index"], ["classes/class_webrtcpeerconnectionextension", "WebRTCPeerConnectionExtension", "N", "next"], ["classes/class_webrtcmultiplayerpeer", "WebRTCMultiplayerPeer", "P", "previous"]], "sourcename": "classes/class_webrtcpeerconnection.rst.txt", "toc": "<ul>\n<li><a class=\"reference internal\" href=\"#\">WebRTCPeerConnection</a><ul>\n<li><a class=\"reference internal\" href=\"#description\">Description</a></li>\n<li><a class=\"reference internal\" href=\"#tutorials\">Tutorials</a></li>\n<li><a class=\"reference internal\" href=\"#methods\">Methods</a></li>\n<li><a class=\"reference internal\" href=\"#signals\">Signals</a></li>\n<li><a class=\"reference internal\" href=\"#enumerations\">Enumerations</a></li>\n<li><a class=\"reference internal\" href=\"#method-descriptions\">Method Descriptions</a></li>\n</ul>\n</li>\n</ul>\n", "display_toc": true, "page_source_suffix": ".rst", "current_page_name": "classes/class_webrtcpeerconnection", "sidebars": ["localtoc.html", "relations.html", "sourcelink.html", "searchbox.html"], "alabaster_version": "1.0.0", "alabaster_version_info": [1, 0, 0], "sphinx_version_info": [8, 1, 3, "final", 0], "READTHEDOCS": false}